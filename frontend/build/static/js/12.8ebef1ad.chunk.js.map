{"version":3,"sources":["components/TabContainer/TabContainer.tsx","../node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","../node_modules/@ant-design/icons/es/icons/InboxOutlined.js","api/picturetools.ts","pages/Tools/PictureTools/PictureLetterRecTool.tsx","pages/Tools/PictureTools/PictureTools.tsx"],"names":["TabContainer","state","currentIndex","props","curr_index","tabChoiced","id","setState","generateTabContent","tabs","map","tabinfo","display_style","className","style","tabCont","generateTabList","index","tabStyle","onClick","bind","tabName","this","tabList","Component","InboxOutlined","ref","React","AntdIcon","_objectSpread","icon","InboxOutlinedSvg","displayName","getPictureLetterRecRes","file_name","model_type","data","FormData","append","request","url","method","headers","Dragger","Upload","TextArea","Input","PictureLetterRecTool","upload_file","rec_result","PictureUploadArea_onUpload","SubmitArea_onClick","e","message","warn","then","response","code","rec_text","ParamSelectionArea_onChange","target","value","onUpload","onChange","PictureUploadArea","upload_props","name","multiple","maxCount","action","process","accept","from","info","status","file","console","log","fileList","success","error","onDrop","dataTransfer","files","ParamSelectionArea","Group","RecResultDisplayArea","placeholder","autoSize","minRows","maxRows","SubmitArea","type","PictureTools"],"mappings":"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","file":"static/js/12.8ebef1ad.chunk.js","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Divider} from \"antd\";\r\n\r\nimport './TabContainer.css';\r\n\r\ninterface Itab {\r\n    id: number\r\n    tabName: string\r\n    tabCont: any\r\n}\r\n\r\ninterface ITabContainerProps {\r\n    tabs: Itab[]\r\n    curr_index?: number\r\n}\r\n\r\nexport default class TabContainer extends Component <ITabContainerProps, any> {\r\n    state = {\r\n        currentIndex: this.props.curr_index?this.props.curr_index:1,\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    tabChoiced=(id:number)=>{\r\n        //tab切换到方法\r\n        this.setState({\r\n            currentIndex:id\r\n        });\r\n    }\r\n\r\n    generateTabContent = (id:number) => {\r\n        let currentContent = this.props.tabs.map(\r\n                (tabinfo)=>{\r\n                    let display_style = tabinfo.id===id?'block':'none';\r\n                    return (\r\n                        <div className={'TabContent-Item'} style={{'display':display_style}}>\r\n                            {tabinfo.tabCont}\r\n                        </div>\r\n                    )\r\n                }\r\n            )\r\n        return currentContent\r\n    }\r\n\r\n    generateTabList = (curr_index: number) => {\r\n        let tabList = this.props.tabs.map(\r\n            (tabinfo: { id: any; tabName: any;}, index:number) => {\r\n                // 遍历标签页，如果标签的id等于tabid，那么该标签就加多一个active的className\r\n                var tabStyle=tabinfo.id==curr_index ? 'TabList-Item active' : 'TabList-Item';\r\n                return <div key={index}\r\n                           onClick={this.tabChoiced.bind(this, tabinfo.id)}\r\n                           className={tabStyle}>\r\n                           {tabinfo.tabName}\r\n                       </div>\r\n        });\r\n        return tabList\r\n    }\r\n\r\n    render() {\r\n        const curr_index = this.state.currentIndex;\r\n        const tabList= this.generateTabList(curr_index);\r\n        const tabCont = this.generateTabContent(curr_index);\r\n        return (\r\n            <div className=\"TabContainer\">\r\n                <div className=\"TabList\">\r\n                    {tabList}\r\n                </div>\r\n                <Divider/>\r\n                <div className=\"TabContent\">\r\n                    <div>\r\n                        {tabCont}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\n\nInboxOutlined.displayName = 'InboxOutlined';\nexport default /*#__PURE__*/React.forwardRef(InboxOutlined);","import request from \"../utils/request\";\r\n\r\nexport const getPictureLetterRecRes = (file_name: string, model_type: string) => {\r\n    const data = new FormData();\r\n    data.append('file_name', file_name);\r\n    data.append('model_type', model_type);\r\n    return request({\r\n        url:    '/picture/letterrec',\r\n        method: 'post',\r\n        headers: {'Content-Type': 'multipart/form-data'},\r\n        data:    data\r\n    })\r\n}","import React, {Component} from \"react\";\r\nimport \"./PictureTools.css\"\r\n\r\nimport { Upload, message, Input, Button, Radio } from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport { getPictureLetterRecRes } from \"../../../api/picturetools\"\r\n\r\nconst { Dragger } = Upload;\r\nconst { TextArea } = Input;\r\n\r\nexport default class PictureLetterRecTool extends Component<any, any> {\r\n    state = {\r\n        upload_file: '',\r\n        model_type: '',\r\n        rec_result: ''\r\n    }\r\n\r\n    PictureUploadArea_onUpload = (upload_file: string) => {\r\n        this.setState({\r\n            upload_file: upload_file,\r\n        })\r\n    }\r\n\r\n    SubmitArea_onClick = (e: any) => {\r\n        if(this.state.model_type=='' || this.state.upload_file=='') {\r\n            message.warn('upload_file, model_type, rec_result存在空值，无法提交服务端');\r\n        }\r\n        else {\r\n            const file_name = this.state.upload_file;\r\n            const model_type = this.state.model_type;\r\n            getPictureLetterRecRes(file_name, model_type).then((response)=>{\r\n                if(response.data.code==200){\r\n                    this.setState({\r\n                        rec_result: response.data.data.rec_text,\r\n                    })\r\n                }\r\n                else {\r\n                    message.warn(response.data.message);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    ParamSelectionArea_onChange = (e: any) => {\r\n        this.setState({\r\n            model_type: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'letter_rec_tool'}>\r\n                <div className={'upload_area'}>\r\n                    这里是Picture上传区域\r\n                    <PictureUploadArea\r\n                        onUpload ={this.PictureUploadArea_onUpload}\r\n                    />\r\n                </div>\r\n                <div className={'display_area'}>\r\n                    这里是文件比对结果展示区，可以直接粘贴文字出来\r\n                    <RecResultDisplayArea\r\n                        rec_result = {this.state.rec_result}\r\n                    />\r\n                </div>\r\n                <div className={'option_area'}>\r\n                    <p>这里是参数配置区，选择需要转换所使用的如 模型类型 等</p>\r\n                    <ParamSelectionArea\r\n                        onChange = {this.ParamSelectionArea_onChange}\r\n                    />\r\n                </div>\r\n                <div className={'submit_area'}>\r\n                    <SubmitArea\r\n                        onClick = {this.SubmitArea_onClick}\r\n                    />\r\n                </div>\r\n                {this.state.upload_file}\r\n                {this.state.model_type}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass PictureUploadArea extends Component<any, any> {\r\n    render() {\r\n        const {onUpload} = this.props;\r\n        const upload_props = {\r\n            name: 'file',\r\n            multiple: false,\r\n            maxCount: 1,\r\n            action: process.env.REACT_APP_URL + '/upload/picturetools/picture',\r\n            accept: '.jpg,.png',\r\n            headers: {\r\n                from: 'PictureLetterRecTool',\r\n            },\r\n            onChange(info:any) {\r\n                const { status } = info.file;\r\n                if (status !== 'uploading') {\r\n                    console.log(info.file, info.fileList);\r\n                }\r\n                if (status === 'done') {\r\n                    message.success(`${info.file.name} file uploaded successfully.`);\r\n                    onUpload(`PictureLetterRecTool_${info.file.name}`);\r\n                }\r\n                else if (status === 'error') {\r\n                    message.error(`${info.file.name} file upload failed.`);\r\n                    onUpload(``);\r\n                }\r\n            },\r\n            onDrop(e: any) {\r\n                console.log('Dropped files', e.dataTransfer.files);\r\n            },\r\n        };\r\n\r\n        return (\r\n            <Dragger {...upload_props}>\r\n                <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                </p>\r\n                <p className=\"ant-upload-text\">请上传或拖入图片</p>\r\n                <p className=\"ant-upload-hint\">\r\n                   只能对1张图片进行识别，多次上传会覆盖\r\n                </p>\r\n          </Dragger>\r\n        )\r\n    }\r\n}\r\n\r\nclass ParamSelectionArea extends Component<any, any> {\r\n    onChange = (e: any) => {\r\n        console.log('radio checked', e.target.value);\r\n        this.props.onChange(e);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Radio.Group onChange={this.onChange}>\r\n                <Radio value={'baidu'}>百度</Radio>\r\n                <Radio value={'kdxf'}>科大讯飞</Radio>\r\n                <Radio value={'ali'}>阿里</Radio>\r\n            </Radio.Group>\r\n        )\r\n    }\r\n}\r\n\r\nclass RecResultDisplayArea extends Component<any, any> {\r\n    status = {\r\n\r\n    }\r\n\r\n    render() {\r\n        const {rec_result} = this.props;\r\n\r\n        return (\r\n            <TextArea\r\n              placeholder=\"请选择模型并点击”一键识别“\"\r\n              autoSize={{ minRows: 10, maxRows:10}}\r\n              value = {rec_result}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nclass SubmitArea extends Component<any, any> {\r\n    onClick = (e: any) => {\r\n        console.log('PictureLetterRecTool - Picture Submit!');\r\n        this.props.onClick(e);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Button type={'primary'} onClick={this.onClick}>一键识别</Button>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\n\r\nimport TabContainer from \"../../../components/TabContainer/TabContainer\"\r\nimport PictureLetterRecTool from \"./PictureLetterRecTool\"\r\nimport \"./PictureTools.css\"\r\n\r\nclass PictureTools extends Component {\r\n    state = {\r\n        tabs : [\r\n            {id: 1, tabName: '图像文字识别', tabCont: <PictureLetterRecTool/>},\r\n            {id: 2, tabName: '图像头像识别', tabCont: <></>},\r\n            {id: 3, tabName: '图像头像比对', tabCont: <></>},\r\n            {id: 4, tabName: '图像换头',    tabCont: <></>},\r\n        ]\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'picturetools'}>\r\n                This is Picture Tools!\r\n                <TabContainer\r\n                    tabs = {this.state.tabs}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default PictureTools;"],"sourceRoot":""}