{"version":3,"sources":["utils/request.tsx","utils/storage.tsx","router/Router.tsx","components/layout/LeftBar.tsx","components/layout/Layout.tsx","components/View.tsx","api/userinfo.ts","App.tsx","store/UserStore.tsx","store/index.tsx","index.tsx"],"names":["service","axios","create","baseURL","process","timeout","interceptors","request","use","config","key","NProgress","start","headers","localStorage","getItem","error","done","Promise","reject","response","status","code","data","message","warning","clear","console","log","Modal","title","HomePage","lazy","TodoList","VideoPlayer","ImagePlayer","Movies","Trading","ForexTrading","DigitalCurrency","Article","CloudHandsTrading","Tree","PDFTools","PictureTools","Login","TestPage","Page404","authrouter","id","path","exact","component","icon","HomeTwoTone","DatabaseTwoTone","VideoCameraTwoTone","children","PlayCircleTwoTone","CameraTwoTone","MoneyCollectTwoTone","FileTextTwoTone","ForkOutlined","ToolFilled","FilePdfFilled","PictureFilled","router","SubMenu","Menu","LeftBar","state","defaultOpenKeys","defaultSelectedKeys","highlightMenu","leftRoutes","props","location","pathname","r","match","matchPath","isExact","setState","generateMenu","routerList","map","Item","to","this","length","theme","triggerSubMenuAction","mode","Component","withRouter","Header","Layout","Content","Footer","Sider","ILayout","inject","observer","collapsed","onCollapse","collapsible","style","overflow","height","left","className","onClick","window","href","padding","margin","minHeight","textAlign","userStore","username","View","generateRoute","fallback","from","getUserInfo","url","WebApp","getUserName","then","user_name","changeName","UserStore","makeAutoObservable","observable","action","name","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.f6e6b81a.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport {message, Modal} from 'antd';\r\nimport NProgress from 'nprogress'\r\nimport {clear, get} from \"./storage\";\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n    baseURL: process.env.REACT_APP_URL, // url = base url + request url\r\n    // withCredentials: true, // send cookies when cross-domain requests\r\n    timeout: 180000 // request timeout: 180s\r\n})\r\n\r\n// request interceptor 请求拦截器\r\nservice.interceptors.request.use(\r\n    config => {\r\n        NProgress.start();\r\n        config.headers['Authorization'] = get('token');\r\n        return config\r\n    },\r\n    error => {\r\n        NProgress.done();\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n    response => {\r\n        NProgress.done();\r\n        if (response.status === 200) {\r\n            const {code} = response.data\r\n            if (code === 4003) {\r\n                message.warning('你的登录状态已经丢失，请退出后重新登录！')\r\n                return Promise.reject('请登录')\r\n            } else if (code === 4000) {\r\n                clear()\r\n                // window.location.href = '/login'\r\n                return Promise.reject('认证失败')\r\n            }\r\n            return response;\r\n        } else {\r\n            console.log(response.status);\r\n            Modal.error({\r\n                title: '网络请求错误'\r\n            });\r\n            return Promise.reject('网络请求错误')\r\n        }\r\n    },\r\n    error => {\r\n        Modal.error({\r\n            title: '网络请求错误'\r\n        });\r\n        NProgress.done();\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default service","export const rm = (key: string) => {\r\n    localStorage.removeItem(key)\r\n}\r\nexport const get = (key: string): string | null => {\r\n    return localStorage.getItem(key)\r\n}\r\nexport const set = (key: string, val: string) => {\r\n    return localStorage.setItem(key, val)\r\n}\r\nexport const clear = () => {\r\n    return localStorage.clear()\r\n}\r\n","import {ReactNode, lazy} from \"react\";\r\n\r\n// https://ant.design/components/icon-cn/\r\nimport { HomeTwoTone, DatabaseTwoTone, VideoCameraTwoTone,\r\n         PlayCircleTwoTone, CameraTwoTone, MoneyCollectTwoTone,\r\n         FileTextTwoTone, ForkOutlined,\r\n         ToolFilled, FilePdfFilled, PictureFilled } from '@ant-design/icons';\r\n\r\n// authorized pages\r\nconst HomePage = lazy(()=>import(\"../pages/HomePage/HomePage\"))\r\n\r\nconst TodoList = lazy(()=>import(\"../pages/TodoList/TodoList\"))\r\n\r\nconst VideoPlayer = lazy(()=>import(\"../pages/Media/VideoPlayer/VideoPlayer\"))\r\nconst ImagePlayer = lazy(()=>import(\"../pages/Media/ImagePlayer/ImagePlayer\"))\r\nconst Movies = lazy(()=>import(\"../pages/Media/Movies/Movies\"))\r\n\r\nconst Trading = lazy(()=>import(\"../pages/Trading/Trading\"))\r\nconst ForexTrading = lazy(()=>import(\"../pages/Trading/Forex/ForexTrading\"))\r\nconst DigitalCurrency = lazy(()=>import(\"../pages/Trading/DigitalCurrency/DigitalCurrency\"))\r\n\r\nconst Article = lazy(()=>import(\"../pages/Article/Article\"))\r\nconst CloudHandsTrading = lazy(()=>import(\"../pages/Article/CloundHandsTrading/CloudHandsTrading\"))\r\n\r\nconst Tree = lazy(()=>import(\"../pages/Tree/Tree\"))\r\n\r\nconst PDFTools = lazy(()=>import(\"../pages/Tools/PDFTools/PDFTools\"))\r\nconst PictureTools = lazy(()=>import(\"../pages/Tools/PictureTools/PictureTools\"))\r\n\r\n// unauthorized pages\r\nconst Login = lazy(()=>import(\"../pages/Login\"))\r\nconst TestPage = lazy(() =>import(\"../pages/Test\"));\r\nconst Page404 = lazy(() =>import(\"../pages/Page404\"));\r\n\r\nexport interface IRouter {\r\n    id:         string\r\n    title:      string\r\n    path:       string\r\n    exact?:     boolean\r\n    component?: ReactNode\r\n    children?:  IRouter[]\r\n    icon?:      ReactNode\r\n}\r\n\r\nexport const authrouter: IRouter[] = [\r\n    {   id:         '1',\r\n        path:       '/homepage',\r\n        title:      'HomePage',\r\n        exact:      true,\r\n        component:  <HomePage/>,\r\n        icon:       <HomeTwoTone />\r\n    },\r\n    {   id:         \"2\",\r\n        path:       '/todolist',\r\n        title:      'Todolist',\r\n        exact:      true,\r\n        component:  <TodoList/>,\r\n        icon:       <DatabaseTwoTone />\r\n    },\r\n    {   id:         \"3\",\r\n        path:       \"/media\",\r\n        title:      'Media',\r\n        icon:       <VideoCameraTwoTone />,\r\n        children:   [\r\n            {id:         \"3-1\",\r\n             path:       '/media/video',\r\n             title:      'VideoPlayer',\r\n             exact:      true,\r\n             component:  <VideoPlayer/>,\r\n             icon:       <PlayCircleTwoTone />\r\n            },\r\n            {id:         \"3-2\",\r\n             path:       '/media/image',\r\n             title:      'ImagePlayer',\r\n             exact:      true,\r\n             component:  <ImagePlayer/>,\r\n             icon:       <CameraTwoTone />\r\n            },\r\n            {id:         \"3-3\",\r\n             path:       '/media/movies',\r\n             title:      'Movies',\r\n             exact:      true,\r\n             component:  <Movies/>,\r\n             icon:       <VideoCameraTwoTone />\r\n            },\r\n        ]\r\n    },\r\n    {   id:         \"4\",\r\n        path:       \"/trading\",\r\n        title:      'Trading',\r\n        component:  <Trading />,\r\n        icon:       <MoneyCollectTwoTone />,\r\n        children:   [\r\n            {   id:         \"41\",\r\n                path:       \"/trading/forex\",\r\n                title:      'Forex',\r\n                component:  <ForexTrading />,\r\n                icon:       <MoneyCollectTwoTone />,\r\n            },\r\n            {   id:         \"42\",\r\n                path:       \"/trading/digitalcurrency\",\r\n                title:      'Digital Currency',\r\n                component:  <DigitalCurrency />,\r\n                icon:       <MoneyCollectTwoTone />,\r\n            },\r\n        ]\r\n    },\r\n    {   id:         \"5\",\r\n        path:       \"/article\",\r\n        title:      'Article',\r\n        component:  <Article />,\r\n        icon:       <FileTextTwoTone />,\r\n        children: [\r\n            {id:         \"51\",\r\n             path:       \"/article/cloudhandstrading\",\r\n             title:      'Clound Hands Weekly Trading Report',\r\n             component:  <CloudHandsTrading />,\r\n             icon:       <FileTextTwoTone />\r\n            },\r\n        ]\r\n    },\r\n    {   id:         \"6\",\r\n        path:       \"/tree\",\r\n        title:      'Tree',\r\n        component:  <Tree />,\r\n        icon:       <ForkOutlined />\r\n    },\r\n    {   id:         \"7\",\r\n        path:       \"/tools\",\r\n        title:      'Tools',\r\n        icon:      <ToolFilled />,\r\n        children: [\r\n                    {   id:         \"7-1\",\r\n                        path:       \"/tools/pdf\",\r\n                        title:      'PDF Tools',\r\n                        component:  <PDFTools />,\r\n                        icon:       <FilePdfFilled />\r\n                    },\r\n                    {   id:         \"7-2\",\r\n                        path:       \"/tools/picture\",\r\n                        title:      'Picture Tools',\r\n                        component:  <PictureTools />,\r\n                        icon:       <PictureFilled />\r\n                    },\r\n        ]\r\n    }\r\n]\r\n\r\nexport const unauthrouter: IRouter[] = [\r\n    {   id:         '0',\r\n        path:       '/login',\r\n        title:      'Login',\r\n        exact:      true,\r\n        component:  <Login/>\r\n    },\r\n    {   id:         '999',\r\n        path:       '/testpage',\r\n        title:      'TestPage',\r\n        exact:      true,\r\n        component:  <TestPage/>\r\n    },\r\n    {   id:         '404',\r\n        path:       '/*',\r\n        title:      'Page404',\r\n        component:  <Page404/>\r\n    }\r\n]\r\n\r\nexport const router: IRouter[] = [\r\n    ...authrouter,\r\n    ...unauthrouter\r\n]\r\n","import React, {Component} from 'react';\r\nimport {RouteComponentProps, withRouter, matchPath, Link} from 'react-router-dom'\r\nimport {IRouter, authrouter} from \"../../router/Router\";\r\n\r\nimport {Menu} from \"antd\";\r\nconst { SubMenu } = Menu;\r\n\r\ninterface LeftBarProps extends RouteComponentProps{\r\n\r\n}\r\ninterface LeftBarState {\r\n    defaultOpenKeys:     string[]\r\n    defaultSelectedKeys: string[]\r\n}\r\n\r\nclass LeftBar extends Component<LeftBarProps, LeftBarState> {\r\n    state = {\r\n        defaultOpenKeys:     [],\r\n        defaultSelectedKeys: []\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        this.highlightMenu(authrouter);\r\n    }\r\n\r\n    // 根据 this.props.location.pathname展开和高亮显示对应标签\r\n    highlightMenu = (leftRoutes: IRouter[]) => {\r\n        const path = this.props.location.pathname;\r\n        //console.log(path);\r\n        //console.log(leftRoutes);\r\n        for (let r of leftRoutes){\r\n            let match=matchPath(path, {path: r.path})\r\n            if (match) {\r\n                if(match.isExact){\r\n                    this.setState({\r\n                        defaultSelectedKeys: [r.id]\r\n                    })\r\n                } else {\r\n                    this.setState({\r\n                        defaultOpenKeys : [r.id]\r\n                    })\r\n                }\r\n            }\r\n            if (r.children) {\r\n                this.highlightMenu(r.children)\r\n            }\r\n        }\r\n    }\r\n\r\n    // 根据IRouter目前的全部路由进行渲染，得到LeftBar的Menu\r\n    generateMenu = (routerList?: IRouter[]) => {\r\n        return (\r\n                routerList?.map( r=>{\r\n                if(r.children){\r\n                    return (\r\n                        <SubMenu key={r.id} icon={r.icon} title={r.title} >\r\n                            {this.generateMenu(r.children)}\r\n                        </SubMenu>\r\n                        )\r\n                    }\r\n                return  (\r\n                        <Menu.Item key={r.id} icon={r.icon}>\r\n                            <Link to={r.path}>{r.title}</Link>\r\n                        </Menu.Item>\r\n                    )\r\n                })\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n             <>\r\n                {this.state.defaultSelectedKeys.length>0\r\n                    ?\r\n                 <Menu theme=\"dark\"\r\n                    defaultOpenKeys={this.state.defaultOpenKeys}\r\n                    defaultSelectedKeys={this.state.defaultSelectedKeys}\r\n                    triggerSubMenuAction={'click'}\r\n                    mode=\"inline\">\r\n                       {this.generateMenu(authrouter)}\r\n                 </Menu>\r\n                    :\r\n                 <></>\r\n                }\r\n             </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(LeftBar);","import React, {Component} from 'react';\r\n\r\nimport LeftBar from './LeftBar'\r\nimport { Layout, Menu } from 'antd';\r\nimport './Layout.css'\r\nimport {inject, observer} from \"mobx-react\";\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\n@inject('userStore')\r\n@observer\r\nclass ILayout extends Component<any, any> {\r\n    state = {\r\n        collapsed: true,\r\n      };\r\n\r\n    onCollapse = (collapsed: boolean) => {\r\n        // console.log(collapsed);\r\n        this.setState({ collapsed });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <Sider\r\n                    collapsible\r\n                    collapsed={this.state.collapsed}\r\n                    onCollapse={this.onCollapse}\r\n                    style={{\r\n                        overflow: 'auto',\r\n                        height: '100vh',\r\n                        left: 0,\r\n                    }}\r\n                >\r\n                  <div className=\"logo\"\r\n                       onClick={()=>{window.location.href = '/'}}\r\n                  />\r\n                  <LeftBar/>\r\n                </Sider>\r\n                <Layout className=\"site-layout\">\r\n                    <Header className=\"site-layout-background\" style={{ padding: 0 }} />\r\n                    <Content style={{ margin: '0 16px' }}>\r\n                      <div className=\"site-layout-background\" style={{ padding: 24, minHeight: 360, textAlign: 'center' }}>\r\n                        {this.props.children}\r\n                      </div>\r\n                    </Content>\r\n                    <Footer style={{ textAlign: 'center' }}>{this.props.userStore.username}</Footer>\r\n                </Layout>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ILayout;","// 将 authrouter 渲染成 带Layout的格式\r\nimport {BrowserRouter as Router, Redirect, Route, Switch} from \"react-router-dom\";\r\nimport ILayout from \"./layout/Layout\";\r\nimport {router, IRouter} from \"../router/Router\";\r\nimport React, {Suspense, Component, ReactNode, lazy, } from \"react\";\r\n\r\nexport default class View extends Component<any, any> {\r\n    generateRoute = (routerList?: IRouter[]): ReactNode => {\r\n        let routenodes = (routerList?.map(r => {\r\n                                if (r.children) {\r\n                                    return (\r\n                                        this.generateRoute(r.children)\r\n                                    )\r\n                                }\r\n                                return (\r\n                                    <Route exact={r.exact}  path={r.path} key={r.id}>\r\n                                        <ILayout>{r.component}</ILayout>\r\n                                    </Route>\r\n                                )\r\n                            })\r\n                        )\r\n        return routenodes\r\n    }\r\n\r\n    render() {\r\n        // 若是authrouter中路由，则LeftBar会展示所有authrouter按钮\r\n        // 若是unauthrouter中路由，则LeftBar不会展示任何按钮，且兜底进404页面\r\n        return (\r\n                    <Suspense fallback={<div>Loading...</div>}>\r\n                         <Router>\r\n                             <Switch>\r\n                                 <Redirect exact from={'/'} to={'/homepage'}/>\r\n                                 {this.generateRoute(router)}\r\n                            </Switch>\r\n                        </Router>\r\n                    </Suspense>\r\n\r\n        )\r\n    }\r\n}","import request from \"../utils/request\"\r\n\r\nexport const getUserInfo = ()=>{\r\n    return request( {\r\n        url: 'user/userinfo/get'\r\n    })\r\n}","import React, {Component} from 'react';\r\nimport View from './components/View'\r\n\r\nimport './App.css';\r\n\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {getUserInfo} from \"./api/userinfo\";\r\n\r\n@inject('userStore')\r\nclass WebApp extends Component<any, any> {\r\n    // 访问api获取登录用户姓名，更新userStore\r\n    getUserName = () => {\r\n        getUserInfo().then( (response: { data: {user_name: string;};}) => {\r\n            //console.log(response);\r\n            const username = response.data.user_name;\r\n            this.props.userStore?.changeName(username);\r\n        })\r\n    }\r\n\r\n    render() {\r\n        // this.getUserName();\r\n        return (\r\n            <View/>\r\n        )}\r\n}\r\n\r\nexport default WebApp;\r\n","import {observable, makeAutoObservable, action} from \"mobx\"\r\n\r\nexport default class UserStore {\r\n    @observable\r\n    public username: string\r\n\r\n    constructor(username: string='Not Login!') {\r\n        this.username = username;\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n    @action\r\n    changeName= (name:string)=>{\r\n        this.username = name\r\n    }\r\n}","import UserStore from \"./UserStore\";\r\n\r\nexport default {\r\n    userStore: new UserStore()\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport WebApp from './App';\n//import reportWebVitals from './reportWebVitals';\n\nimport store from './store'\nimport {Provider} from \"mobx-react\"\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider {...store}>\n        <WebApp />\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}